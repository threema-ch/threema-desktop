<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="633px" preserveAspectRatio="none" style="width:1129px;height:633px;background:#FFFFFF;" version="1.1" viewBox="0 0 1129 633" width="1129px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="35.6094" style="stroke:#FFFFFF;stroke-width:0.0;" width="227" x="454.5" y="10"/><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="217" x="459.5" y="35.4209">App Initialization</text><rect fill="#EFF4FC" height="568.2266" style="stroke:#000000;stroke-width:1.0;" width="511.5" x="11" y="52.6094"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="67" x="230.75" y="64.6763">Frontend</text><rect fill="#FCF2EF" height="568.2266" style="stroke:#000000;stroke-width:1.0;" width="428" x="560" y="52.6094"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="64" x="739.5" y="64.6763">Backend</text><rect fill="#F0FCEF" height="568.2266" style="stroke:#000000;stroke-width:1.0;" width="116" x="1000" y="52.6094"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="62" x="1024.5" y="64.6763">Network</text><rect fill="#FFFFFF" height="327.2656" style="stroke:#000000;stroke-width:1.0;" width="944.5" x="177.5" y="253.4375"/><rect fill="#FFFFFF" height="46.2656" style="stroke:#000000;stroke-width:1.0;" width="330" x="554" y="394.1016"/><rect fill="#FFFFFF" height="104.2031" style="stroke:none;stroke-width:1.0;" width="944.5" x="177.5" y="476.5"/><rect fill="#FFFFFF" height="46.2656" style="stroke:#000000;stroke-width:1.0;" width="330" x="554" y="498.3047"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="45" x2="45" y1="149.0391" y2="626.8359"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="206.5" x2="206.5" y1="149.0391" y2="626.8359"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="437.5" x2="437.5" y1="149.0391" y2="626.8359"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="611" x2="611" y1="149.0391" y2="626.8359"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="817" x2="817" y1="149.0391" y2="626.8359"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="934" x2="934" y1="149.0391" y2="626.8359"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1058" x2="1058" y1="149.0391" y2="626.8359"/><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="41" x="25" y="117.7422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="27" x="32" y="137.7373">App</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="32" x="187.5" y="145.7373">User</text><ellipse cx="206.5" cy="80.7422" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1.0;"/><path d="M206.5,88.7422 L206.5,115.7422 M193.5,96.7422 L219.5,96.7422 M206.5,115.7422 L193.5,130.7422 M206.5,115.7422 L219.5,130.7422 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="142" x="366.5" y="117.7422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="128" x="373.5" y="137.7373">BackendController</text><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="75" x="574" y="117.7422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="61" x="581" y="137.7373">Backend</text><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="93" x="771" y="117.7422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="79" x="778" y="137.7373">KeyStorage</text><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="80" x="894" y="117.7422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="66" x="901" y="137.7373">Database</text><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="88" x="1014" y="117.7422"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="74" x="1021" y="137.7373">SafeServer</text><polygon fill="#000000" points="194.5,176.1719,204.5,180.1719,194.5,184.1719,198.5,180.1719" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="45.5" x2="200.5" y1="180.1719" y2="180.1719"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="137" x="52.5" y="175.106">showLoadingScreen()</text><polygon fill="#000000" points="425.5,205.3047,435.5,209.3047,425.5,213.3047,429.5,209.3047" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="45.5" x2="431.5" y1="209.3047" y2="209.3047"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="51" x="52.5" y="204.2388">create()</text><polygon fill="#000000" points="599.5,234.4375,609.5,238.4375,599.5,242.4375,603.5,238.4375" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="437.5" x2="605.5" y1="238.4375" y2="238.4375"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="51" x="444.5" y="233.3716">create()</text><path d="M177.5,253.4375 L241.5,253.4375 L241.5,260.5703 L231.5,270.5703 L177.5,270.5703 L177.5,253.4375 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="327.2656" style="stroke:#000000;stroke-width:1.0;" width="944.5" x="177.5" y="253.4375"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="192.5" y="266.5044">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="125" x="256.5" y="265.6479">[identity not found]</text><polygon fill="#000000" points="448.5,287.7031,438.5,291.7031,448.5,295.7031,444.5,291.7031" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="442.5" x2="610.5" y1="291.7031" y2="291.7031"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="109" x="454.5" y="286.6372">Error(no-identity)</text><polygon fill="#000000" points="217.5,316.8359,207.5,320.8359,217.5,324.8359,213.5,320.8359" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="211.5" x2="436.5" y1="320.8359" y2="320.8359"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="207" x="223.5" y="315.77">requestSafeBackupCredentials()</text><polygon fill="#000000" points="599.5,345.9688,609.5,349.9688,599.5,353.9688,603.5,349.9688" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="437.5" x2="605.5" y1="349.9688" y2="349.9688"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="150" x="444.5" y="344.9028">create(safeCredentials)</text><polygon fill="#000000" points="1046,375.1016,1056,379.1016,1046,383.1016,1050,379.1016" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="611.5" x2="1052" y1="379.1016" y2="379.1016"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="70" x="618.5" y="374.0356">download()</text><path d="M554,394.1016 L618,394.1016 L618,401.2344 L608,411.2344 L554,411.2344 L554,394.1016 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:1.0;" width="330" x="554" y="394.1016"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="569" y="407.1685">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="63" x="633" y="406.312">[electron]</text><polygon fill="#000000" points="805.5,428.3672,815.5,432.3672,805.5,436.3672,809.5,432.3672" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="611.5" x2="811.5" y1="432.3672" y2="432.3672"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="182" x="618.5" y="427.3013">createKeyStorage(clientKey)</text><polygon fill="#000000" points="922,464.5,932,468.5,922,472.5,926,468.5" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="611.5" x2="928" y1="468.5" y2="468.5"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="201" x="618.5" y="463.4341">createDatabase(essentialData)</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="177.5" x2="1122" y1="477.5" y2="477.5"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="100" x="182.5" y="487.7104">[identity found]</text><path d="M554,498.3047 L618,498.3047 L618,505.4375 L608,515.4375 L554,515.4375 L554,498.3047 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:1.0;" width="330" x="554" y="498.3047"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="569" y="511.3716">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="63" x="633" y="510.5151">[electron]</text><polygon fill="#000000" points="805.5,532.5703,815.5,536.5703,805.5,540.5703,809.5,536.5703" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="611.5" x2="811.5" y1="536.5703" y2="536.5703"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="111" x="618.5" y="531.5044">loadKeyStorage()</text><polygon fill="#000000" points="922,568.7031,932,572.7031,922,576.7031,926,572.7031" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="611.5" x2="928" y1="572.7031" y2="572.7031"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="99" x="618.5" y="567.6372">loadDatabase()</text><polygon fill="#000000" points="194.5,604.8359,204.5,608.8359,194.5,612.8359,198.5,608.8359" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="45.5" x2="200.5" y1="608.8359" y2="608.8359"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="112" x="52.5" y="603.77">showApplication()</text><!--MD5=[995a19319c9887d3b622da19281e6af5]
@startuml
!theme plain
title App Initialization
hide footbox

box Frontend #eff4fc
  participant App
  actor User
  participant BackendController
endbox
box Backend #fcf2ef
  participant Backend
  participant KeyStorage
  participant Database
endbox
box Network #f0fcef
  participant SafeServer
endbox

App->User:showLoadingScreen()
App->BackendController:create()
BackendController->Backend:create()

alt identity not found
  Backend->BackendController:Error(no-identity)

  BackendController->User:requestSafeBackupCredentials()
  BackendController->Backend:create(safeCredentials)
  Backend->SafeServer:download()
  alt electron
    Backend->KeyStorage:createKeyStorage(clientKey)
  end
  Backend->Database:createDatabase(essentialData)
else identity found
  alt electron
    Backend->KeyStorage:loadKeyStorage()
  end
  Backend->Database:loadDatabase()
end

App->User:showApplication()
@enduml

@startuml







<style>
  root {
    BackgroundColor white
    FontColor black
    FontName Verdana
    HyperLinkColor blue
    LineColor black
    LineThickness 1
    Margin 5
  }
  caption {
    LineThickness 0
  }
  footer {
    LineThickness 0
  }
  header {
    LineThickness 0
  }
  node {
    MaximumWidth 300
  }
  title {
    FontSize 22
    LineThickness 0
  }
</style>

skinparam ArrowLollipopColor black
skinparam BackgroundColor white
skinparam DefaultFontName Verdana
skinparam DefaultMonospacedFontName Courier
skinparam LifelineStrategy nosolid
skinparam ParticipantPadding 10
skinparam SequenceLifeLineBorderColor black
skinparam Shadowing false
skinparam UseBetaStyle true

skinparam Activity {
  BackgroundColor white
  BarColor black
  BorderColor black
  FontColor black
  FontName Verdana
}
skinparam Boundary {
  FontColor black
}
skinparam Box {
  Padding 5
}
skinparam CircledCharacter {
  FontColor black
  FontName Courier
  Radius 9
}
skinparam Class {
  BackgroundColor white
  BorderColor black
  FontColor black
  FontName Verdana
}
skinparam ClassAttribute {
  FontColor black
  FontName Verdana
}
skinparam ClassStereotype {
  FontColor black
  FontName Verdana
}
skinparam Footer {
  FontColor black
  FontName Verdana
}
skinparam Header {
  FontColor black
  FontName Verdana
}
skinparam Hyperlink {
  Color blue
}
skinparam IconPackage {
  Color black
  BackgroundColor white
}
skinparam IconPrivate {
  Color black
  BackgroundColor white
}
skinparam IconProtected {
  Color black
  BackgroundColor white
}
skinparam IconPublic {
  Color black
  BackgroundColor white
}
skinparam Note {
  FontColor black
  FontName Verdana
}
skinparam Object {
  BorderColor black
}
skinparam Package {
  BorderColor black
  FontColor black
  FontName Verdana
}
skinparam State {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeA {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeC {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeE {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeI {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeN {
  BackgroundColor white
  BorderColor black
}
skinparam UseCaseStereoType {
  FontColor black
  FontName Verdana
}
title App Initialization
hide footbox

box Frontend #eff4fc
  participant App
  actor User
  participant BackendController
endbox
box Backend #fcf2ef
  participant Backend
  participant KeyStorage
  participant Database
endbox
box Network #f0fcef
  participant SafeServer
endbox

App->User:showLoadingScreen()
App->BackendController:create()
BackendController->Backend:create()

alt identity not found
  Backend->BackendController:Error(no-identity)

  BackendController->User:requestSafeBackupCredentials()
  BackendController->Backend:create(safeCredentials)
  Backend->SafeServer:download()
  alt electron
    Backend->KeyStorage:createKeyStorage(clientKey)
  end
  Backend->Database:createDatabase(essentialData)
else identity found
  alt electron
    Backend->KeyStorage:loadKeyStorage()
  end
  Backend->Database:loadDatabase()
end

App->User:showApplication()
@enduml

PlantUML version 1.2022.5(Sat Apr 30 12:55:52 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>